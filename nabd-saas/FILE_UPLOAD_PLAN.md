# ๐ค ุฎุทุฉ ูุธุงู ุฑูุน ุงููููุงุช (File Upload System Plan)

**ุงููุดุฑูุน:** ูุจุถ (Nabd SaaS)
**ุงูุญุงูุฉ:** ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช (API) ุฌุงูุฒุฉ ูุน ุชุฎุฒูู ูุคูุช (Mock).

---

## 1. ุงูุจููุฉ ุงูุชุญุชูุฉ (Infrastructure)

ูุธุงู ุฑูุน ุงููููุงุช ุตูู ููููู "Non-Blocking" ูููุญุงุฏุซุฉุ ุญูุซ ูุชู ุฑูุน ุงูููู ุฃููุงู ุซู ุฅุฑุณุงู ุงูุฑุงุจุท ููุฐูุงุก ุงูุงุตุทูุงุนู.

### ุงููููุฒุงุช ุงูุฃูููุฉ
*   **ุงูุญุฌู ุงูุฃูุตู:** 5 ููุฌุงุจุงูุช (ูุชู ูุฑุถู ูู `api/upload`).
*   **ุงูุฃููุงุน ุงููุณููุญุฉ:** `Images (PNG/JPG/WEBP)`, `PDF`, `TXT`, `CSV`.
*   **ุชุนููู ุงูุฃุณูุงุก:** ูุชู ุงุณุชุจุฏุงู ุงูุฑููุฒ ุงูุฎุงุตุฉ ูู ุงุณู ุงูููู ุจู `_` ูููุน ูุฌูุงุช ุงููุณุงุฑ (Path Traversal).

---

## 2. ุงูุชูุงูู ูุน ุงูุชุฎุฒูู ุงูุณุญุงุจู (Cloud Storage)

ุญุงููุงูุ ุงูููุฏ ูุณุชุฎุฏู "ูุญุงูุงุฉ" (Mock Upload). ููุงูุชูุงู ููุฅูุชุงุฌ ุงููุนูู (Production)ุ ูุฌุจ ุฑุจุท ุฎุฏูุฉ ูุซู **Cloudflare R2** ุฃู **AWS S3**.

### ุงูุฎุทูุงุช ุงููุทููุจุฉ:
1.  ุชุซุจูุช ุงูุญุฒูุฉ: `npm install @aws-sdk/client-s3`
2.  ุฅุถุงูุฉ ุงููุชุบูุฑุงุช ูู `.env`:
    ```env
    R2_ACCOUNT_ID=...
    R2_ACCESS_KEY_ID=...
    R2_SECRET_ACCESS_KEY=...
    R2_BUCKET_NAME=nabd-uploads
    R2_PUBLIC_URL=https://files.amiraq.online
    ```
3.  ุชุนุฏูู ููู `src/app/api/upload/route.ts` ูุฅูุบุงุก ุชุนููู ููุฏ ุงูู AWS SDK.

---

## 3. ูุงุฆูุฉ ุงูุชุญูู ููุงุฎุชุจุงุฑ (QA Checklist)

| # | ุงูุงุฎุชุจุงุฑ | ุงููุชูุฌุฉ ุงููุชููุนุฉ |
|---|---|---|
| 1 | ุฑูุน ููู ูุตู ุตุบูุฑ (1KB) | โ ูุฌุงุญ (200 OK) ูุฑุงุจุท ุตุญูุญ. |
| 2 | ุฑูุน ููู ุถุฎู (10MB) | โ ุฎุทุฃ (413 Payload Too Large). |
| 3 | ุฑูุน ููู ุชูููุฐู (.exe) | โ ุฎุทุฃ (415 Unsupported Media Type). |
| 4 | ุงูุณุญุจ ูุงูุฅููุงุช (Drag & Drop) | โ ุธููุฑ ุงูููู ูู ุฎุงูุฉ ุงูุฅุฏุฎุงู. |
| 5 | ุงููุญุงุฏุซุฉ ูุน ููู | โ ุงูู AI ูุฑู ุงูุฑุงุจุท ููุญูู ุงููุญุชูู (ุฅุฐุง ูุงู ูุฏุนูู). |

---

ูุฐุง ุงููุธุงู ูุถูู ุฃู ุชุฌุฑุจุฉ ุงููุญุงุฏุซุฉ ูุง ุชุชุฃุซุฑ ุจุจุทุก ุฑูุน ุงููููุงุชุ ููุญุงูุธ ุนูู ุฃูุงู ุงูุณูุฑูุฑ ูู ุงููููุงุช ุงูุฎุทุฑุฉ.
