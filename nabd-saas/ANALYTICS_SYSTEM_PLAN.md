# ๐ ูุธุงู ุงูุชุญูููุงุช ุงููุชูุฏู (Advanced Analytics System) - ูุจุถ

**ุงููุดุฑูุน:** ูุจุถ (Nabd SaaS)
**ุงููุฏู:** ุจูุงุก ูุญุฑู ุชุญูููุงุช ุฏุงุฎูู ูููุฑ ุฑุคู ุนูููุฉ ุญูู ุณููู ุงููุณุชุฎุฏูููุ ุฃุฏุงุก ุงูุฐูุงุก ุงูุงุตุทูุงุนูุ ูููู ุงูุฃุนูุงู.

---

## 1. ุงููุนูุงุฑูุฉ ุงููุฌููุฉ (Hybrid Architecture)

ููุชุฑุญ ูุนูุงุฑูุฉ ุชุฌูุน ุจูู **ุฏูุฉ ุงูุจูุงูุงุช ุงูุฏุงุฎููุฉ** ู **ููุฉ ุฃุฏูุงุช ุงูุชุชุจุน ุงูุฎุงุฑุฌูุฉ**:

```mermaid
graph TD
    User[ุงููุณุชุฎุฏู] --> App[ุชุทุจูู ูุจุถ]
    App -->|ุฃุญุฏุงุซ ุงูุนูู| DB[(PostgreSQL)]
    App -->|ุฃุญุฏุงุซ ุงูุณููู| AnalyticsEngine[PostHog / Umami]
    
    DB --> ETL[ูุนุงูุฌ ุงูุจูุงูุงุช ุงููููู]
    ETL --> DataWarehouse[(ูุณุชูุฏุน ุงูุชุญูููุงุช)]
    
    DataWarehouse --> AdminDash[ููุญุฉ ุชุญูู ุงููุณุคูู]
    AnalyticsEngine --> AdminDash
```

1.  **ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุชุดุบูููุฉ (PostgreSQL):** ููููุงููุณ ุงูุฏูููุฉ (ุงูุฅูุฑุงุฏุงุชุ ุนุฏุฏ ุงููุณุชุฎุฏูููุ ุงูุฎุทุท).
2.  **ูุญุฑู ุงูุณููู (PostHog - Self Hosted):** ูุชุชุจุน ุงูููุฑุงุชุ ุงูุฎุฑุงุฆุท ุงูุญุฑุงุฑูุฉ (Heatmaps)ุ ููุณุงุฑุงุช ุงูุชุญููู (Funnels) ุฏูู ุงูุชุฃุซูุฑ ุนูู ุฎุตูุตูุฉ ุงููุณุชุฎุฏู (GDPR Compliant).

---

## 2. ูุตูููุฉ ุงูููุงููุณ (Metrics Matrix)

### ุฃ. ููุงููุณ ุงูููู (Growth & Business) ๐
| ุงููููุงุณ | ุงููุตู | ุงููุงุฆุฏุฉ |
|---------|-------|---------|
| **MRR / ARR** | ุงูุฅูุฑุงุฏุงุช ุงููุชูุฑุฑุฉ ุงูุดูุฑูุฉ/ุงูุณูููุฉ | ููุงุณ ุตุญุฉ ุงูุนูู ุงููุงูู. |
| **Churn Rate** | ูุนุฏู ุฅูุบุงุก ุงูุงุดุชุฑุงูุงุช | ูุนุฑูุฉ ูุฏู ุฑุถุง ุงูุนููุงุก. |
| **ARPU** | ูุชูุณุท ุงูุนุงุฆุฏ ููู ูุณุชุฎุฏู | ุชุญุฏูุฏ ูููุฉ ุงูุนููู. |
| **Conversion Rate** | ูุณุจุฉ ุชุญูู ุงูุฒูุงุฑ ุฅูู ูุณุฌููู | ููุงุณ ูุนุงููุฉ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ. |

### ุจ. ููุงููุณ ุงูุฐูุงุก ุงูุงุตุทูุงุนู (AI Performance) ๐ค
| ุงููููุงุณ | ุงููุตู | ุงููุงุฆุฏุฉ |
|---------|-------|---------|
| **Token Usage** | ุงุณุชููุงู ุงูุฑููุฒ (ุงูุฅุฏุฎุงู/ุงูุฅุฎุฑุงุฌ) | ุญุณุงุจ ุงูุชูููุฉ ุงูุชุดุบูููุฉ ุจุฏูุฉ. |
| **Avg. Response Time** | ูุชูุณุท ุฒูู ุงุณุชุฌุงุจุฉ ุงูุจูุช | ูุฑุงูุจุฉ ุฌูุฏุฉ ุงูุชุฌุฑุจุฉ (Latency). |
| **Feedback Score** | ุชูููู ุงููุณุชุฎุฏู ููุฑุฏ (๐/๐) | ุชุญุณูู ุฌูุฏุฉ ุงูู Prompts. |
| **Model Preference** | ุงูููุงุฐุฌ ุงูุฃูุซุฑ ุงุณุชุฎุฏุงูุงู | ุชุญุฏูุฏ ุฃู ุงูููุงุฐุฌ (Llama vs Gemma) ููุถููุง ุงููุงุณ. |

### ุฌ. ููุงููุณ ุงูุชูุงุนู (Engagement) ๐ฌ
| ุงููููุงุณ | ุงููุตู | ุงููุงุฆุฏุฉ |
|---------|-------|---------|
| **DAU / MAU** | ุงููุดุทูู ููููุงู / ุดูุฑูุงู | ููุงุณ "ูุฒูุฌุฉ" ุงูููุชุฌ (Stickiness). |
| **Avg. Session Length** | ูุชูุณุท ูุฏุฉ ุงูุฌูุณุฉ | ูู ูุฌุฏ ุงููุณุชุฎุฏู ูููุฉ ูู ุงููุญุงุฏุซุฉุ |
| **Retention Cohorts** | ูุนุฏู ุนูุฏุฉ ุงููุณุชุฎุฏููู ุจุนุฏ ุฃุณุจูุน | ููู ููุงุก ุงููุณุชุฎุฏููู. |

---

## 3. ุฎุทุฉ ููุญุฉ ุงูุชุญูููุงุช (Dashboard Roadmap)

### ุงููุฑุญูุฉ 1: ุงูุชุญูููุงุช ุงูุฃุณุงุณูุฉ (MVP)
*   [ ] ุจุทุงูุงุช ุงูุฅุญุตุงุฆูุงุช ุงูุญูุฉ (Users, Messages, Revenue).
*   [ ] ุฑุณู ุจูุงูู ูุงุณุชููุงู ุงูุฑููุฒ (Token Usage Chart).
*   [ ] ุฌุฏูู "ุขุฎุฑ ุงููุดุงุทุงุช" (Live Feed).

### ุงููุฑุญูุฉ 2: ุงูุชุญูููุงุช ุงูุณููููุฉ
*   [ ] ุฏูุฌ ููุชุจุฉ ุฑุณูู ุจูุงููุฉ ูุชูุฏูุฉ (**Recharts**).
*   [ ] ุนุฑุถ ุฎุฑูุทุฉ ุชูุฒูุน ุงููุณุชุฎุฏููู (Geographic Map) - ุชุฑููุฒ ุนูู ุงูุนุฑุงู.
*   [ ] ุชุญููู ุงูุงูุญุฏุงุฑ (Churn Prediction) ุจุณูุท.

### ุงููุฑุญูุฉ 3: ุงูุฐูุงุก ุงูุงุตุทูุงุนู ุงูุชูุจุฆู
*   [ ] ุชููุน ุงูุฅูุฑุงุฏุงุช ููุดูุฑ ุงููุงุฏู.
*   [ ] ูุดู ุงูุดุฐูุฐ (Anomaly Detection) ูู ุงุณุชุฎุฏุงู API ูุชุฌูุจ ุงููุฌูุงุช.

---

## 4. ูููุฐุฌ ุงูุจูุงูุงุช ุงูููุชุฑุญ (Data Schema)

ุฅุถุงูุฉ ุฌุฏุงูู ุฌุฏูุฏุฉ ููุงุนุฏุฉ ุงูุจูุงูุงุช `schema.prisma`:

```prisma
model AnalyticsEvent {
  id        String   @id @default(cuid())
  userId    String?
  eventType String   // e.g., "chat_started", "subscription_upgraded"
  metadata  Json?    // { model: "llama-3", tokens: 150 }
  timestamp DateTime @default(now())

  @@index([eventType, timestamp])
}

model DailyMetrics {
  date      DateTime @id @db.Date
  totalTokens BigInt
  totalRevenue Decimal
  activeUsers Int
}
```

---

## 5. ุชูุตูุงุช ุงูุชูููุฐ
ููุจุฏุก ููุฑุงู ุฏูู ุชุนููุฏ ุงูุจููุฉ ุงูุชุญุชูุฉุ ููุตู ุจู:
1.  ุงุณุชุฎุฏุงู **Supabase** ูุชุฎุฒูู ุงูุฃุญุฏุงุซ.
2.  ุจูุงุก ูุงุฌูุฉ ููุญุฉ ุงูุชุญูู ุจุงุณุชุฎุฏุงู ููููุงุชูุง ุงูุญุงููุฉ (`StatsCard`).
3.  ุงุณุชุฎุฏุงู **Recharts** ูุฃูู ุฎููู ููุชูุงูู ุชูุงูุงู ูุน Next.js.

ูุฐุง ุงููุธุงู ุณูุญูู "ูุจุถ" ูู ูุฌุฑุฏ ุฃุฏุงุฉ ุฅูู **ููุตุฉ ุชุนุชูุฏ ุนูู ุงูุจูุงูุงุช (Data-Driven)** ูู ุงุชุฎุงุฐ ุงููุฑุงุฑุงุช.
