# ๐จ ูุธุงู ุงููุฑุงูุจุฉ ูุงูุชูุจููุงุช ุงููุชูุฏู (Monitoring & Alerting System)

**ุงููุดุฑูุน:** ูุจุถ (Nabd SaaS)
**ุงููุฏู:** ุถูุงู ุงุณุชูุฑุงุฑ ุงูุฎุฏูุฉ ุจูุณุจุฉ 99.9% ูู ุฎูุงู ุงุณุชุจุงู ุงููุดุงูู ูุจู ุฃู ุชุคุซุฑ ุนูู ุงููุณุชุฎุฏููู.

---

## 1. ุงููุนูุงุฑูุฉ ุงููุฑููุฉ ูููุฑุงูุจุฉ (Monitoring Hierarchy)

ุณูุนุชูุฏ ููุฌ **"ุงูุทุจูุงุช ุงูุซูุงุซ"** ูุถูุงู ุชุบุทูุฉ ูุงููุฉ:

| ุงูุทุจูุฉ | ูุงุฐุง ูุฑุงูุจุ | ุงูุฃุฏูุงุช ุงูููุชุฑุญุฉ |
|--------|-------------|------------------|
| **1. ุงูุจููุฉ ุงูุชุญุชูุฉ (Infrastructure)** | ุตุญุฉ ุงูุณูุฑูุฑุ ุงูุฐุงูุฑุฉุ CPU. | Vercel Analytics / AWS CloudWatch |
| **2. ุงูุชุทุจูู (Application)** | ุฒูู ุงูุงุณุชุฌุงุจุฉ (Latency)ุ ุงูุฃุฎุทุงุก (500 errors)ุ ุงุณุชููุงู ุงูู API. | Sentry / LogRocket |
| **3. ุงูุฃุนูุงู (Business)** | ุงูุฎูุงุถ ุงูุฏูุนุงุชุ ุชููู ุงูุชุณุฌููุงุชุ ููู ุบูุฑ ุทุจูุนู. | Custom Alerts via Slack |

---

## 2. ูุตูููุฉ ุงูุชูุจููุงุช ุงูุฐููุฉ (Smart Alert Matrix)

### ๐ด ุงููุณุชูู ุงูุญุฑุฌ (Critical - P1)
*ูุชุทูุจ ุชุฏุฎูุงู ููุฑูุงู (ุฅููุงุฏ ุงููุฑูู ูู 3 ูุฌุฑุงู)*

1.  **Groq API Failure:** ูุณุจุฉ ูุดู > 5% ูู ุทูุจุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู.
2.  **Database Connection Lost:** ูุดู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช.
3.  **Payment Webhook Error:** ูุดู ุงุณุชูุงู ุชุฃููุฏุงุช ุงูุฏูุน ูู ZainCash.

### ๐ก ุงููุณุชูู ุงูุนุงูู (High - P2)
*ูุชุทูุจ ุญูุงู ุฎูุงู ุณุงุนุงุช ุงูุนูู*

1.  **Elevated Latency:** ูุชูุณุท ุงูุงุณุชุฌุงุจุฉ ูุชุฌุงูุฒ 3 ุซูุงูู ูุฃูุซุฑ ูู 10 ุฏูุงุฆู.
2.  **Auth Rate Limit:** ุงุฑุชูุงุน ุนุฏุฏ ูุญุงููุงุช ุชุณุฌูู ุงูุฏุฎูู ุงููุงุดูุฉ (ูุฌูู ูุญุชูู).
3.  **Token Spike:** ูุณุชุฎุฏู ูุงุญุฏ ูุณุชููู ุฃูุซุฑ ูู 100$ ูู ุณุงุนุฉ.

### ๐ต ุงููุณุชูู ุงููุนูููุงุชู (Info - P3)
*ูููุฑุงุฌุนุฉ ุงูุฃุณุจูุนูุฉ*

1.  **New Enterprise Sign-up:** ุชุณุฌูู ุดุฑูุฉ ุฌุฏูุฏุฉ.
2.  **Daily Report:** ููุฎุต ุงูุฃุฏุงุก ุงููููู.

---

## 3. ูููุงุช ุงูุชูุจูู (Alert Channels)

1.  **Slack / Discord:** ุงูููุงุฉ ุงูุฑุฆูุณูุฉ ูููุฑูู ุงูุชููู (ุชูุจููุงุช ููุฑูุฉ).
2.  **Email:** ููุชูุจููุงุช ุงููุงููุฉ ูุงูุฅุฏุงุฑูุฉ (P3).
3.  **SMS / PagerDuty:** ููุญุงูุงุช ุงูุญุฑุฌุฉ ุฌุฏุงู (P1) ููุท.

---

## 4. ุฎุทุฉ ุงูุชูููุฐ ุงูููุฑู (Implementation Plan)

### ุงููุฑุญูุฉ 1: ุฅุนุฏุงุฏ Sentry (ูุฃุฎุทุงุก ุงูููุฏ)
*   ุฑุจุท Next.js ุจู Sentry ููุฑุงูุจุฉ ุงูู Frontend & Backend errors.
*   ุชูุนูู `Performance Monitoring` ูุชุชุจุน ุงูู Web Vitals.

### ุงููุฑุญูุฉ 2: ูุฑุงูุจุฉ ุงูู API (Custom Monitoring)
*   ุฅูุดุงุก `Middleware` ุจุณูุท ูุณุฌู ุฒูู ูู ุทูุจ ูุญุงูุชู.
*   ุฅุฐุง ูุดู ุทูุจ Groqุ ุฃุฑุณู ุฅุดุนุงุฑุงู ููุฑูุงู ุฅูู Discord Webhook.

### ุงููุฑุญูุฉ 3: ููุญุฉ ุงูุชูุจููุงุช (Admin UI)
*   ุฅุถุงูุฉ ุตูุญุฉ `/admin/alerts` ูุนุฑุถ ุณุฌู ุงูุชูุจููุงุช ุงูุณุงุจู ูุชูููู/ุชุนุทูู ุงูุชูุจููุงุช ูุฏููุงู.

---

## 5. ูููุฐุฌ ููุฏ ูุฅุฑุณุงู ุงูุชูุจููุงุช (Notification Service)

```typescript
// src/lib/monitoring.ts

export async function sendAlert(level: 'CRITICAL' | 'INFO', message: string, meta: any = {}) {
  const webhookUrl = process.env.DISCORD_WEBHOOK_URL;
  if (!webhookUrl) return;

  const color = level === 'CRITICAL' ? 15158332 : 3447003; // Red or Blue

  await fetch(webhookUrl, {
    method: 'POST',
    body: JSON.stringify({
      embeds: [{
        title: `๐จ ${level}: ${message}`,
        color: color,
        fields: Object.entries(meta).map(([key, value]) => ({ name: key, value: String(value), inline: true })),
        timestamp: new Date().toISOString()
      }]
    })
  });
}
```

ุจูุฌูุฏ ูุฐุง ุงููุธุงูุ ูู ุชููู "ุฃุนูู" ุนูุง ูุญุฏุซ ูู ุงููุธุงูุ ูุณุชููู ุฃูู ูู ูุนูู ุจุฃู ูุดููุฉ.
